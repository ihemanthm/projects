<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe game</title>
    <!--Writing Internal Css inside <style></style> tags-->
    <style>
        table,td{
            width:30lvw;
            height:15lvh;
            border:2px solid #2af2de;
            border-radius:5px;
            cursor:pointer;
        }
        td{
            text-align:center;
            font-size:3em;
        }
        #reset{
            border:3px solid rgb(162, 208, 199);
            border-radius:20px;
            width:20%;
            height:5lvh;
            text-align: center;
            cursor:pointer;
        }
        .resetter{
            margin-left:45%;
            margin-left:45%;
            margin-top:2%;

        }
        .highlight{
            border:3px solid red;
            border-radius:10px;
        }
    </style>
</head>
<body>
    <h1 align="center">Tic-Tac-Toe Game</h1>
    <h3>Welcome guys,have fun</h3>
    <h4>Rules: <br></h4>
    <ul type="square">
        <li>Winner gets party from looser that's it.</li>
    </ul>
    <table cellspacing="5px" align="center" id="gameBoard">
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
    <div class="resetter">
        <button type="reset" id="reset">Reset</button>
    </div>
    <!--Javascript code to add the functionality,written inside <script></script> tags-->
    <script>
        //confirm("start your game now");
        var mat=[[null,null,null],[null,null,null],[null,null,null]]
        //Reset button action
        let cells=document.querySelectorAll("td")
        document.getElementById("reset").addEventListener('click',function(event){
            for(let i=0;i<9;i++){
                cells[i].textContent="";
            }
            mat=[[null,null,null],[null,null,null],[null,null,null]];
        });
        let flag=true
        var res;
        for(let i=0;i<9;i++){
            cells[i].addEventListener('click',function(event){
                cells[i].classList.add("highlight")
                if(flag){
                    if(this.textContent!=''){
                        return;
                    }
                    this.textContent='X';
                    mat[Math.floor(i/3)][i%3]='X';
                }
                else{
                    if(this.textContent!=''){
                        return;
                    }
                    this.textContent='O';
                    mat[Math.floor(i/3)][i%3]='O';
                }
                flag=flag^true;
            });
            cells[i].addEventListener("mouseleave",function(event){
                cells[i].classList.remove("highlight");
                res=validateMat(mat)
                console.log(res)
                if(res!=null){
                    if(res=='X'){
                        confirm("player 'X' won the game")
                        reset();
                    }
                    else if(res=='O'){
                        confirm("Player 'O' won the game")
                        reset();
                    }
                }
            });
        }
        
        function validateMat(mat){
            count=0
            //
            for(let i=0;i<3;i++){
                str=""
                for(let j=0;j<3;j++){
                    if(mat[i][j]==null)
                        count+=1
                    str+=mat[i][j];
                }
                if(str=='XXX')
                    return 'X'
                else if(str=='OOO')
                    return 'O'
            }
            if(count==0){
                reset()
                return null;
            }
            //vertical
            for(let i=0;i<3;i++){
                str=""
                for(let j=0;j<3;j++){
                    str+=mat[j][i];
                }
                if(str=='XXX')
                    return 'X'
                else if(str=='OOO')
                    return 'O'
            }
            //left-diagonal
            let ld=mat[0][0]+mat[1][1]+mat[2][2]
            if(ld=='XXX')
                return 'X';
            else if(ld=='OOO')
                return 'O'
            //right-diagonal
            let rd=mat[0][2]+mat[1][1]+mat[2][0]
            if(rd=='XXX')
                return 'X';
            else if(rd=='OOO')
                return 'O'
            return null;
        }
        function reset(){
            for(let i=0;i<9;i++){
                cells[i].textContent="";
                mat=[[null,null,null],[null,null,null],[null,null,null]];
            }
        }
    </script>
</body>
</html>
